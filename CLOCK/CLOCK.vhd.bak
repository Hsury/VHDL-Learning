--时钟顶层设计文件 2017/04/11
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;

	CLOCK IS
	PORT (CLK_50MHZ : IN STD_LOGIC;
	      KEY1, KEY2 : IN STD_LOGIC;
	      DUAN : OUT STD_LOGIC_VECTOR (7 DOWNTO 0); --数码管段
	      WEI : OUT STD_LOGIC_VECTOR (5 DOWNTO 0); --数码管位
			BUZZER : OUT STD_LOGIC);
END CLOCK;

ARCHITECTURE BEHAV OF CLOCK IS
	COMPONENT FREQ_DIV IS
		PORT (CLK_50MHZ : IN STD_LOGIC;	--50MHz时钟
				CLK_1KHZ : BUFFER STD_LOGIC;	--1KHz时钟
				CLK_1HZ : BUFFER STD_LOGIC);	--1Hz时钟
	END COMPONENT;
	
	COMPONENT TICK IS
		PORT (CLK_1HZ : IN STD_LOGIC;	--1Hz时钟
				ENA : IN STD_LOGIC;	--时钟使能
				RST : IN STD_LOGIC;	--时钟复位
				HOUR_HIGH : BUFFER INTEGER RANGE 0 TO 2 := 2;
				HOUR_LOW : BUFFER INTEGER RANGE 0 TO 9 := 3;
				MINUTE_HIGH : BUFFER INTEGER RANGE 0 TO 5 := 5;
				MINUTE_LOW : BUFFER INTEGER RANGE 0 TO 9 := 9;
				SECOND_HIGH : BUFFER INTEGER RANGE 0 TO 5 := 0;
				SECOND_LOW : BUFFER INTEGER RANGE 0 TO 9 := 0;
				CO_DAY : OUT STD_LOGIC);	--新的一天
	END COMPONENT;
	
	COMPONENT KEY_SCAN IS
		GENERIC (KEY_TRIGGER : STD_LOGIC := '0');	--配置按键触发电平
		PORT (CLK_1KHZ : IN STD_LOGIC;	--1KHz时钟
				KEY_IN : IN STD_LOGIC;	--按键输入
				KEY_OUT : OUT STD_LOGIC := NOT KEY_TRIGGER);	--按键输出
	END COMPONENT;
	
	COMPONENT LED_CTRL IS
		PORT (CLK_1KHZ : IN STD_LOGIC;	--1KHz时钟
				CLK_1HZ : IN STD_LOGIC;	--1Hz时钟
				HOUR_HIGH : IN INTEGER RANGE 0 TO 2;
				HOUR_LOW : IN INTEGER RANGE 0 TO 9;
				MINUTE_HIGH : IN INTEGER RANGE 0 TO 5;
				MINUTE_LOW : IN INTEGER RANGE 0 TO 9;
				SECOND_HIGH : IN INTEGER RANGE 0 TO 5;
				SECOND_LOW : IN INTEGER RANGE 0 TO 9;
				CURRSOR : OUT STD_LOGIC_VECTOR (2 DOWNTO 0);
				DATA : OUT INTEGER RANGE 0 TO 9;
				DP : OUT STD_LOGIC);
	END COMPONENT;
	
	COMPONENT DECODER_3TO8 IS
	PORT (DATA_IN : IN STD_LOGIC_VECTOR (2 DOWNTO 0);
	      DATA_OUT : OUT BIT_VECTOR (5 DOWNTO 0));
	END COMPONENT;
	
	COMPONENT SEG8 IS
	PORT (DATA : IN INTEGER RANGE 0 TO 9;
	      DP : IN STD_LOGIC;
	      BAR : OUT STD_LOGIC_VECTOR (7 DOWNTO 0));
	END COMPONENT;
BEGIN